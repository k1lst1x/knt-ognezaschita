{% load static %}

<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}KnT-Ognezaschita — Огнезащита в Казахстане{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}Качественная огнезащита: материалы, решения, монтаж. Доставка по Казахстану. Сертифицированные продукты от KnT-Ognezaschita.{% endblock %}">
    <meta name="keywords" content="огнезащита, огнезащитные материалы, КнТ, Polihim, металлоконструкции, купить огнезащиту, огнезащита Алматы, огнезащита Казахстан, противопожарная обработка, огнезащита кабеля, огнезащитные составы, огнезащита древесины, огнезащитная краска, сертификаты огнезащиты, огнезащитная пропитка, монтаж огнезащиты, огнезащита зданий, огнезащита конструкций, противопожарные покрытия, пассивная огнезащита, пожарная безопасность, антипирен, проектирование огнезащиты, расчет огнезащиты, огнезащита цена, огнезащита для металла, огнезащита для дерева, купить огнезащиту в Казахстане, противопожарная изоляция, fire protection, fireproofing Kazakhstan, fire retardant materials, огнезащита объектов">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow">

    <!-- Canonical -->
    <link rel="canonical" href="{{ request.build_absolute_uri }}">

    <!-- Open Graph -->
    <meta property="og:title" content="KnT-Ognezaschita — Огнезащита в Казахстане">
    <meta property="og:description" content="Качественная огнезащита и монтаж по всему Казахстану!">
    <meta property="og:image" content="{% static 'images/knt-favicon/favicon-96x96.png' %}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:type" content="website">

    <!-- Organization schema.org JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "KnT-Ognezaschita",
      "url": "https://knt-ognezaschita.kz",
      "logo": "https://knt-ognezaschita.kz/static/images/knt-favicon/favicon-96x96.png",
      "contactPoint": [{
        "@type": "ContactPoint",
        "telephone": "+7-945-123-45-67",
        "contactType": "customer service",
        "areaServed": "KZ",
        "availableLanguage": "Russian"
      }]
    }
    </script>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'images/knt-favicon/favicon-96x96.png' %}" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{% static 'images/knt-favicon/favicon.svg' %}" />
    <link rel="shortcut icon" href="{% static 'images/knt-favicon/favicon.ico' %}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/knt-favicon/apple-touch-icon.png' %}" />
    <meta name="apple-mobile-web-app-title" content="KnT" />
    <link rel="manifest" href="{% static 'images/knt-favicon/site.webmanifest' %}" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            borderRadius: {
              '4xl': '2rem',
            }
          }
        }
      }
    </script>

    <!-- Inter (400‑700) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet">

    <!-- Ваши стили -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'landing.css' %}" />

<style>
.contact-button-fixed {
  position: fixed;
  top: 90%;
  right: 24px;
  transform: translateY(-50%);
  z-index: 1100;
  padding: 12px;
  border-radius: 40%;
  font-size: 1rem;
  box-shadow: -4px 0 16px rgba(0,0,0,0.08);
}
.contact-button-fixed:hover {
  box-shadow: 0 0 32px 12px #ff5d5d22, -4px 0 16px rgba(0,0,0,0.08);
}
.contact-popup {
  position: fixed;
  top: 50%;
  right: 0;
  transform: translateY(-50%) translateX(100%);
  width: 360px;
  max-width: 95vw;
  height: auto;
  background: #fff;
  border-radius: 16px 0 0 16px;
  box-shadow: -8px 0 24px rgba(0, 0, 0, 0.2);
  padding: 36px 28px 28px 28px;
  z-index: 1001;
  font-family: 'Montserrat', 'Arial', sans-serif;
  opacity: 0;
  transition: transform 0.5s ease, opacity 0.5s ease;
  pointer-events: none;
}

.contact-popup.active {
  transform: translateY(-50%) translateX(0);
  opacity: 1;
  pointer-events: auto;
}

.contact-popup .close-btn {
  position: absolute;
  top: 16px;
  right: 20px;
  cursor: pointer;
  font-size: 26px;
  color: #e74c3c;
  background: none;
  border: none;
  line-height: 1;
  transition: color 0.2s;
}

.contact-popup .close-btn:hover {
  color: #b71c1c;
}

.contact-popup h3 {
  color: #e74c3c;
  font-size: 1.6rem;
  font-weight: 500;
  margin-bottom: 10px;
  margin-top: 0;
  line-height: 1.3;
}

.contact-popup .desc {
  color: #888;
  font-size: 1rem;
  margin-bottom: 24px;
}

.contact-popup hr {
  height: 3px;
  background-color: #ccc;
  border: none;
  margin: 20px 0;
}

.contact-popup button.send-btn {
  background: #e74c3c;
  color: #fff;
  border: none;
  border-radius: 30px;
  width: 100%;
  padding: 14px 0;
  font-size: 1.1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  margin-bottom: 12px;
}

.contact-popup button.custom-send-btn {
  background:rgb(255, 255, 255);
  color: red;
  border: 2px solid #e74c3c;
  border-radius: 30px;
  width: 100%;
  padding: 14px 0;
  font-size: 1.1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  margin-bottom: 12px;
}

.contact-popup button.custom-send-btn:hover {
  background: rgba(151, 151, 151, 0.35);
  opacity: 0.6;
}

.contact-popup button.send-btn:hover {
  background: #b71c1c;
}

.overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;

  z-index: 1000;
  display: none;
}

@media (max-width: 500px) {
    .contact-button-fixed {
    padding: 20px 20px;
    font-size: 1rem;
  }
  .contact-popup {
    width: 90vw;
    border-radius: 16px 0 0 16px;
    padding: 24px 20px;
  }
  .contact-popup .close-btn {
    top: 10px;
    right: 16px;
    font-size: 24px;
  }
}

@media (max-width: 991px) {
  .contact-button-fixed {
    right: 8px;
  }
}
@media (max-width: 768px) {
  html {
    scroll-behavior: smooth;
  }
}
.contact-button-fixed {
  width: 60px;
  height: 60px;
  padding: 0;
  font-size: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}
.contact-button-fixed svg {
  width: 60px;
  height: 60px;
}
</style>

  </head>
  <body>

    <!-- Подключаем header через include или отдельный block -->
    {% include 'includes/header.html' %}

    <!-- Основной контент -->
    <main>
      {% block content %} {% endblock %}
    </main>

    <!-- Кнопка -->
<button class="contact-button-fixed" onclick="togglePopup()"><svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="19.5" cy="19.5" r="19.5" fill="#F03222"/>
<path d="M18.8114 20.2665L9.98593 15.8537C9.61989 15.6707 9.38275 15.2787 9.47359 14.8796C9.60606 14.2978 9.87632 14.0051 10.5103 13.8468C10.5787 13.8297 10.6495 13.8228 10.7201 13.8228H28.0214C28.0997 13.8228 28.1783 13.8314 28.2538 13.8521C28.914 14.0335 29.1785 14.3333 29.2954 14.8879C29.3788 15.2835 29.1367 15.6661 28.7734 15.8433L19.6971 20.2708C19.4173 20.4073 19.0899 20.4057 18.8114 20.2665Z" fill="white" stroke="#FFF5F5"/>
<path d="M29.8732 24.9226C29.8817 25.4769 29.8445 26.0577 29.4816 26.4558C29.1058 26.8679 28.526 26.9384 27.8927 26.9109V26.9119H10.8615V26.9109C10.3239 26.9144 9.76681 26.8681 9.37512 26.5076C8.97324 26.1373 8.88079 25.5675 8.88 24.9314L9.88 24.9295C9.88072 25.5351 9.98543 25.7109 10.0519 25.7722C10.1281 25.8422 10.3102 25.9156 10.8575 25.9119H27.9161C28.5331 25.941 28.6928 25.8362 28.7423 25.782C28.8091 25.7087 28.883 25.5193 28.8741 24.9382L29.3741 24.9304L29.8732 24.9226Z" fill="white"/>
<path d="M29.3734 25.4241V17.2785L19.5 22.2152H19.0064L9.37977 17.2785V25.4241" stroke="#FFF5F5"/>
<path d="M10.6139 26.1646L10.1203 25.9314L9.87344 25.6983V17.7722L19.2532 22.7089L29.1266 17.7722V18.0053V25.9314L28.6329 26.1646H10.6139Z" fill="white" stroke="white"/>
</svg></button>

<!-- Затемнение -->
<div class="overlay" id="popupOverlay" onclick="hidePopup()"></div>

<!-- Всплывающее окно -->
<div class="contact-popup" id="contactPopup" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
  <button class="close-btn" onclick="hidePopup()" aria-label="Закрыть">✕</button>
  <h3 id="popupTitle">Оставьте сообщение на WhatsApp или email</h3>
  <div class="desc">Мы обязательно ответим вам в ближайшее время</div>
  <hr style="height: 2px; background-color: gray; border: none;">
  <button class="custom-send-btn" onclick="sendEmail()">kntognezachita@gmail.com</button>
  <button class="send-btn" onclick="sendWhatsApp()">Написать WhatsApp</button>
</div>

    <!-- Подключаем footer через include или отдельный block -->
    {% include 'includes/footer.html' %}

    <!-- JS (Bootstrap и ваши скрипты) -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    
<script>
document.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    showPopup();
  }, 5000); // Всплывает через 5 сек
});

function showPopup() {
  document.getElementById("popupOverlay").style.display = "block";
  document.getElementById("contactPopup").classList.add("active");
}

function hidePopup() {
  document.getElementById("popupOverlay").style.display = "none";
  document.getElementById("contactPopup").classList.remove("active");
}

function togglePopup() {
  const popup = document.getElementById("contactPopup");
  const overlay = document.getElementById("popupOverlay");
  const isActive = popup.classList.contains("active");

  if (isActive) {
    hidePopup();
  } else {
    showPopup();
  }
}

function sendEmail() {
  const email = "kntognezachita@gmail.com";
  const subject = "Сообщение с сайта";
  const body = "Здравствуйте! Хочу получить консультацию.";
  window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
}

function sendWhatsApp() {
  const phoneNumber = "77474347258";
  const message = "Здравствуйте! Хочу получить консультацию.";
  const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
}
</script>

    <script>
      const products2 = [
        {% for product in products %}
        {
          id: "{{ product.slug }}",
          name: "{{ product.name|escapejs }}",
          description: "{{ product.description|escapejs }}",
          benefits: {{ product.benefits|safe }},
          image: "{% if product.image %}{{ product.image.url }}{% else %}/static/images/placeholder.jpg{% endif %}"
        }{% if not forloop.last %},{% endif %}
        {% endfor %}
      ];
    </script>
    <script src="{% static 'landing.js' %}"></script>

  </body>
</html>
